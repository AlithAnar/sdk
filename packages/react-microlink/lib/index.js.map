{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _jsx = function () { var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7; return function createRawReactElement(type, props, key, children) { var defaultProps = type && type.defaultProps; var childrenLength = arguments.length - 3; if (!props && childrenLength !== 0) { props = {}; } if (props && defaultProps) { for (var propName in defaultProps) { if (props[propName] === void 0) { props[propName] = defaultProps[propName]; } } } else if (!props) { props = defaultProps || {}; } if (childrenLength === 1) { props.children = children; } else if (childrenLength > 1) { var childArray = Array(childrenLength); for (var i = 0; i < childrenLength; i++) { childArray[i] = arguments[i + 3]; } props.children = childArray; } return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: key === undefined ? null : '' + key, ref: null, props: props, _owner: null }; }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Card = require('./components/Card');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Microlink = function (_Component) {\n  _inherits(Microlink, _Component);\n\n  function Microlink(props) {\n    _classCallCheck(this, Microlink);\n\n    var _this = _possibleConstructorReturn(this, (Microlink.__proto__ || Object.getPrototypeOf(Microlink)).call(this, props));\n\n    _this.setData = function (_ref) {\n      var data = _ref.data;\n\n      var imagesProps = [].concat(_this.props.image);\n      var image = (0, _utils.someProp)(data, imagesProps);\n      var imageUrl = (0, _utils.getUrlPath)(image);\n      var title = data.title,\n          description = data.description,\n          url = data.url,\n          video = data.video;\n\n      var _ref2 = image || {},\n          color = _ref2.color,\n          backgroundColor = _ref2.background_color;\n\n      _this.setState({\n        color: color,\n        backgroundColor: backgroundColor,\n        title: title,\n        description: description,\n        url: url,\n        loading: false,\n        video: video,\n        image: imageUrl\n      });\n    };\n\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(Microlink, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var data = this.props.data;\n\n      return !data ? this.fetchData().then(this.setData) : this.setData({ data: data });\n    }\n  }, {\n    key: 'fetchData',\n    value: function fetchData() {\n      var url = (0, _utils.createApiUrl)(this.props);\n      var promise = fetch(url, { headers: { 'x-api-key': this.props.apiKey } });\n      return promise.then(function (res) {\n        return res.json();\n      });\n    }\n  }, {\n    key: 'renderContent',\n    value: function renderContent() {\n      var _state = this.state,\n          title = _state.title,\n          description = _state.description,\n          url = _state.url,\n          image = _state.image,\n          video = _state.video;\n      var _props = this.props,\n          size = _props.size,\n          autoPlay = _props.autoPlay,\n          muted = _props.muted,\n          loop = _props.loop;\n\n\n      return _jsx(_react.Fragment, {}, void 0, _jsx(_Card.CardMedia, {\n        image: image,\n        video: video,\n        url: url,\n        cardSize: size,\n        autoPlay: autoPlay,\n        muted: muted,\n        loop: loop\n      }), _jsx(_Card.CardContent, {\n        className: 'microlink_card__content',\n        title: title,\n        description: description,\n        url: url,\n        cardSize: size\n      }));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          title = _state2.title,\n          color = _state2.color,\n          backgroundColor = _state2.backgroundColor,\n          url = _state2.url,\n          loading = _state2.loading;\n\n      var _props2 = this.props,\n          className = _props2.className,\n          size = _props2.size,\n          props = _objectWithoutProperties(_props2, ['className', 'size']);\n\n      return _react2.default.createElement(\n        _Card.CardWrap,\n        _extends({\n          className: className ? 'microlink_card ' + className : 'microlink_card',\n          href: url,\n          title: title,\n          cardSize: size,\n          color: color,\n          backgroundColor: backgroundColor,\n          loading: loading\n        }, props),\n        !loading ? this.renderContent() : _jsx(_Card.CardEmptyState, {\n          cardSize: size\n        })\n      );\n    }\n  }]);\n\n  return Microlink;\n}(_react.Component);\n\nMicrolink.defaultProps = {\n  apiKey: undefined,\n  autoPlay: true,\n  contrast: false,\n  image: ['screenshot', 'image', 'logo'],\n  loop: true,\n  muted: true,\n  prerender: 'auto',\n  reverse: false,\n  screenshot: false,\n  size: 'normal'\n};\n\nexports.default = Microlink;"],"names":["Object","defineProperty","exports","value","REACT_ELEMENT_TYPE","obj","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_jsx","Symbol","for","type","props","children","defaultProps","childrenLength","propName","childArray","Array","$$typeof","undefined","ref","_owner","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","__esModule","default","_Card","_utils","Microlink","_Component","instance","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","setData","_ref","data","imagesProps","concat","image","someProp","imageUrl","getUrlPath","_ref2","setState","color","backgroundColor","background_color","title","description","url","loading","video","state","subClass","superClass","create","constructor","setPrototypeOf","_inherits","Component","fetchData","then","createApiUrl","fetch","headers","x-api-key","apiKey","res","json","_state","_props","size","Fragment","CardMedia","cardSize","autoPlay","muted","loop","CardContent","className","_state2","_props2","keys","indexOf","_objectWithoutProperties","createElement","CardWrap","href","CardEmptyState","renderContent","contrast","prerender","reverse","screenshot"],"mappings":"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"}