{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _jsx = function () { var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7; return function createRawReactElement(type, props, key, children) { var defaultProps = type && type.defaultProps; var childrenLength = arguments.length - 3; if (!props && childrenLength !== 0) { props = {}; } if (props && defaultProps) { for (var propName in defaultProps) { if (props[propName] === void 0) { props[propName] = defaultProps[propName]; } } } else if (!props) { props = defaultProps || {}; } if (childrenLength === 1) { props.children = children; } else if (childrenLength > 1) { var childArray = Array(childrenLength); for (var i = 0; i < childrenLength; i++) { childArray[i] = arguments[i + 3]; } props.children = childArray; } return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: key === undefined ? null : '' + key, ref: null, props: props, _owner: null }; }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Card = require('./components/Card');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Microlink = function (_Component) {\n  _inherits(Microlink, _Component);\n\n  function Microlink() {\n    _classCallCheck(this, Microlink);\n\n    var _this = _possibleConstructorReturn(this, (Microlink.__proto__ || Object.getPrototypeOf(Microlink)).call(this));\n\n    _this.fetchData = function () {\n      var url = (0, _utils.createApiUrl)(_this.props);\n      var promise = fetch(url, { headers: { 'x-api-key': _this.props.apiKey } });\n      return promise.then(function (res) {\n        return res.json();\n      });\n    };\n\n    _this.setData = function (_ref) {\n      var data = _ref.data;\n\n      var imagesProps = [].concat(_this.props.image);\n      var image = (0, _utils.someProp)(data, imagesProps);\n      var imageUrl = (0, _utils.getUrlPath)(image);\n      var title = data.title,\n          description = data.description,\n          url = data.url,\n          video = data.video;\n\n      var _ref2 = image || {},\n          color = _ref2.color,\n          backgroundColor = _ref2.background_color;\n\n      _this.setState({\n        color: color,\n        backgroundColor: backgroundColor,\n        title: title,\n        description: description,\n        url: url,\n        loading: false,\n        video: video,\n        image: imageUrl\n      });\n    };\n\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(Microlink, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.data) return this.setData({ data: this.props.data });\n      return this.fetchData().then(this.setData);\n    }\n  }, {\n    key: 'renderContent',\n    value: function renderContent() {\n      var _state = this.state,\n          title = _state.title,\n          description = _state.description,\n          url = _state.url,\n          image = _state.image,\n          video = _state.video;\n      var _props = this.props,\n          size = _props.size,\n          autoPlay = _props.autoPlay,\n          muted = _props.muted,\n          loop = _props.loop;\n\n\n      return _jsx(_react.Fragment, {}, void 0, _jsx(_Card.CardMedia, {\n        image: image,\n        video: video,\n        url: url,\n        cardSize: size,\n        autoPlay: autoPlay,\n        muted: muted,\n        loop: loop\n      }), _jsx(_Card.CardContent, {\n        className: 'microlink_card__content',\n        title: title,\n        description: description,\n        url: url,\n        cardSize: size\n      }));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state2 = this.state,\n          title = _state2.title,\n          color = _state2.color,\n          backgroundColor = _state2.backgroundColor,\n          url = _state2.url,\n          loading = _state2.loading;\n      var _props2 = this.props,\n          className = _props2.className,\n          reverse = _props2.reverse,\n          size = _props2.size;\n\n\n      return _react2.default.createElement(\n        _Card.CardWrap,\n        _extends({\n          className: className ? 'microlink_card ' + className : 'microlink_card',\n          href: url,\n          title: title,\n          cardSize: size,\n          color: color,\n          backgroundColor: backgroundColor,\n          loading: loading,\n          reverse: reverse\n        }, this.props),\n        !loading ? this.renderContent() : _jsx(_Card.CardEmptyState, {\n          cardSize: size\n        })\n      );\n    }\n  }]);\n\n  return Microlink;\n}(_react.Component);\n\nMicrolink.defaultProps = {\n  apiKey: undefined,\n  autoPlay: true,\n  contrast: false,\n  image: ['screenshot', 'image', 'logo'],\n  loop: true,\n  muted: true,\n  prerender: 'auto',\n  reverse: false,\n  screenshot: false,\n  size: 'normal'\n};\n\nexports.default = Microlink;"],"names":["Object","defineProperty","exports","value","REACT_ELEMENT_TYPE","obj","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_jsx","Symbol","for","type","props","children","defaultProps","childrenLength","propName","childArray","Array","$$typeof","undefined","ref","_owner","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","__esModule","default","_Card","_utils","Microlink","_Component","instance","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","fetchData","url","createApiUrl","fetch","headers","x-api-key","apiKey","then","res","json","setData","_ref","data","imagesProps","concat","image","someProp","imageUrl","getUrlPath","_ref2","setState","color","backgroundColor","background_color","title","description","loading","video","state","subClass","superClass","create","constructor","setPrototypeOf","_inherits","Component","_state","_props","size","Fragment","CardMedia","cardSize","autoPlay","muted","loop","CardContent","className","_state2","_props2","createElement","CardWrap","href","reverse","CardEmptyState","renderContent","contrast","prerender","screenshot"],"mappings":"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"}